{"version":3,"file":"CompletionLink.js","sourceRoot":"","sources":["../../../../../../bin/kafkaConsumer/common/EmailTemplater/templates/CompletionLink.ts"],"names":[],"mappings":";;;;AAAA,uEAAwC;AAExC;IAAoC,0CAAQ;IAA5C;;IASA,CAAC;IARO,gCAAO,GAAb;;;;;;4BAEI,qBAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;4BAChC,KAAK,EAAE,EAAE,gBAAgB,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,EAAE;yBAC3D,CAAC,EAAA;;wBAHE,oBAAoB,SAAG,CAC3B,SAEE,CACH,CAAC,CAAC,CAAC,0CAAE,IAAI;wBACV,sBAAO,6CAA2C,oBAAsB,EAAA;;;;KACzE;IACH,qBAAC;AAAD,CAAC,AATD,CAAoC,qBAAQ,GAS3C;AATY,wCAAc","sourcesContent":["import Template from \"../types/Template\"\n\nexport class CompletionLink extends Template {\n  async resolve() {\n    const completion_link_slug = (\n      await this.prisma.course.findMany({\n        where: { completion_email: { id: this.emailTemplate.id } },\n      })\n    )[0]?.slug\n    return `https://www.mooc.fi/register-completion/${completion_link_slug}`\n  }\n}\n"]}