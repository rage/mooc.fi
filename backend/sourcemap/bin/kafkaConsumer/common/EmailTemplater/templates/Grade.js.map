{"version":3,"file":"Grade.js","sourceRoot":"","sources":["../../../../../../bin/kafkaConsumer/common/EmailTemplater/templates/Grade.ts"],"names":[],"mappings":";;;;AAAA,uEAAwC;AAExC;IAA2B,iCAAQ;IAAnC;;IAkBA,CAAC;IAjBO,uBAAO,GAAb;;;;;;4BAEI,qBAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;4BAChC,KAAK,EAAE,EAAE,gBAAgB,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,EAAE;yBAC3D,CAAC,EAAA;;wBAHE,MAAM,GAAG,CACb,SAEE,CACH,CAAC,CAAC,CAAC;wBACJ,IAAI,CAAC,MAAM,EAAE;4BACX,sBAAO,EAAE,EAAA;yBACV;wBAEC,qBAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;gCACpC,KAAK,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,EAAE;gCAChE,OAAO,EAAE,EAAE,eAAe,EAAE,MAAM,EAAE;6BACrC,CAAC,EAAA;;wBAJE,KAAK,SAAG,CACZ,SAGE,CACH,CAAC,CAAC,CAAC,0CAAE,KAAK;wBACX,sBAAO,KAAG,KAAO,EAAA;;;;KAClB;IACH,YAAC;AAAD,CAAC,AAlBD,CAA2B,qBAAQ,GAkBlC;AAlBY,sBAAK","sourcesContent":["import Template from \"../types/Template\"\n\nexport class Grade extends Template {\n  async resolve() {\n    const course = (\n      await this.prisma.course.findMany({\n        where: { completion_email: { id: this.emailTemplate.id } },\n      })\n    )[0]\n    if (!course) {\n      return \"\"\n    }\n    const grade = (\n      await this.prisma.completion.findMany({\n        where: { user: { id: this.user.id }, course: { id: course.id } },\n        orderBy: { completion_date: \"desc\" },\n      })\n    )[0]?.grade\n    return `${grade}`\n  }\n}\n"]}