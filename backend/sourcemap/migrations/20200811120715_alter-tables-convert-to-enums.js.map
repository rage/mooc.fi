{"version":3,"file":"20200811120715_alter-tables-convert-to-enums.js","sourceRoot":"","sources":["../../migrations/20200811120715_alter-tables-convert-to-enums.ts"],"names":[],"mappings":";;;;AAEA,SAAsB,EAAE,CAAC,IAAU;;;;wBACjC,qBAAM,IAAI,CAAC,GAAG,CAAC,8DAA0D,CAAC,EAAA;;oBAA1E,SAA0E,CAAA;oBAC1E,qBAAM,IAAI,CAAC,GAAG,CACZ,gHAAsG,CACvG,EAAA;;oBAFD,SAEC,CAAA;oBACD,qBAAM,IAAI,CAAC,GAAG,CACZ,wEAAoE,CACrE,EAAA;;oBAFD,SAEC,CAAA;oBAED,qBAAM,IAAI,CAAC,GAAG,CACZ,uEAAmE,CACpE,EAAA;;oBAFD,SAEC,CAAA;oBACD,qBAAM,IAAI,CAAC,GAAG,CACZ,+HAAqH,CACtH,EAAA;;oBAFD,SAEC,CAAA;oBACD,qBAAM,IAAI,CAAC,GAAG,CACZ,gFAA4E,CAC7E,EAAA;;oBAFD,SAEC,CAAA;;;;;CACF;AAlBD,gBAkBC;AAED,SAAsB,IAAI,CAAC,KAAW;;;;CAAmB;AAAzD,oBAAyD","sourcesContent":["import * as Knex from \"knex\"\n\nexport async function up(knex: Knex): Promise<void> {\n  await knex.raw(`ALTER TABLE \"course\" ALTER COLUMN \"status\" DROP DEFAULT;`)\n  await knex.raw(\n    `ALTER TABLE \"course\" ALTER COLUMN \"status\" TYPE \"CourseStatus\" USING \"status\"::text::\"CourseStatus\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" ALTER COLUMN \"status\" SET DEFAULT 'Upcoming';`,\n  )\n\n  await knex.raw(\n    `ALTER TABLE \"user_organization\" ALTER COLUMN \"role\" DROP DEFAULT;`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_organization\" ALTER COLUMN \"role\" TYPE \"OrganizationRole\" USING \"role\"::text::\"OrganizationRole\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_organization\" ALTER COLUMN \"role\" SET DEFAULT 'Student';`,\n  )\n}\n\nexport async function down(_knex: Knex): Promise<void> {}\n"]}