{"version":3,"file":"20200810142948_alter-tables-foreign-key-fields.js","sourceRoot":"","sources":["../../migrations/20200810142948_alter-tables-foreign-key-fields.ts"],"names":[],"mappings":"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","sourcesContent":["import * as Knex from \"knex\"\n\nexport async function up(knex: Knex): Promise<void> {\n  await knex.raw(`ALTER TABLE \"completion\" RENAME \"course\" TO \"course_id\";`)\n  await knex.raw(`ALTER TABLE \"completion\" RENAME \"user\" to \"user_id\";`)\n  await knex.raw(\n    `ALTER TABLE \"completion_registered\" RENAME \"completion\" TO \"completion_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"completion_registered\" RENAME \"course\" TO \"course_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"completion_registered\" RENAME \"organization\" TO \"organization_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"completion_registered\" RENAME \"user\" TO \"user_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" RENAME \"completion_email\" TO \"completion_email_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" RENAME \"completions_handled_by\" TO \"completions_handled_by_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" RENAME \"inherit_settings_from\" TO \"inherit_settings_from_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" RENAME \"owner_organization\" TO \"owner_organization_id\";`,\n  )\n  await knex.raw(`ALTER TABLE \"course\" RENAME \"photo\" TO \"photo_id\";`)\n  await knex.raw(`ALTER TABLE \"course_alias\" RENAME \"course\" TO \"course_id\";`)\n  await knex.raw(\n    `ALTER TABLE \"course_organization\" RENAME \"course\" TO \"course_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course_organization\" RENAME \"organization\" TO \"organization_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course_translation\" RENAME \"course\" TO \"course_id\";`,\n  )\n  await knex.raw(`ALTER TABLE \"course_variant\" RENAME \"course\" TO \"course_id\";`)\n  await knex.raw(\n    `ALTER TABLE \"email_delivery\" RENAME \"email_template\" TO \"email_template_id\";`,\n  )\n  await knex.raw(`ALTER TABLE \"email_delivery\" RENAME \"user\" TO \"user_id\";`)\n  await knex.raw(`ALTER TABLE \"exercise\" RENAME \"course\" TO \"course_id\";`)\n  await knex.raw(`ALTER TABLE \"exercise\" RENAME \"service\" TO \"service_id\";`)\n  await knex.raw(\n    `ALTER TABLE \"exercise_completion\" RENAME \"exercise\" TO \"exercise_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"exercise_completion\" RENAME \"user\" to \"user_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"exercise_completion_required_actions\" RENAME \"exercise_completion\" TO \"exercise_completion_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"open_university_registration_link\" RENAME \"course\" TO \"course_id\";`,\n  )\n  await knex.raw(`ALTER TABLE \"organization\" RENAME \"creator\" TO \"creator_id\";`)\n  await knex.raw(\n    `ALTER TABLE \"organization_translation\" RENAME \"organization\" TO \"organization_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"study_module_translation\" RENAME \"study_module\" TO \"study_module_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_progress\" RENAME \"course\" TO \"course_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_progress\" RENAME \"user\" TO \"user_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_service_progress\" RENAME \"course\" TO \"course_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_service_progress\" RENAME \"service\" TO \"service_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_service_progress\" RENAME \"user\" TO \"user_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_service_progress\" RENAME \"user_course_progress\" TO \"user_course_progress_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"UserCourseSettings\" RENAME \"course\" TO \"course_id\";`,\n  )\n  await knex.raw(`ALTER TABLE \"UserCourseSettings\" RENAME \"user\" TO \"user_id\";`)\n  await knex.raw(\n    `ALTER TABLE \"user_course_settings_visibility\" RENAME \"course\" TO \"course_id\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_organization\" RENAME \"organization\" TO \"organization_id\";`,\n  )\n  await knex.raw(`ALTER TABLE \"user_organization\" RENAME \"user\" TO \"user_id\";`)\n  await knex.raw(\n    `ALTER TABLE \"verified_user\" RENAME \"organization\" TO \"organization_id\";`,\n  )\n  await knex.raw(`ALTER TABLE \"verified_user\" RENAME \"user\" TO \"user_id\";`)\n}\n\nexport async function down(knex: Knex): Promise<void> {\n  await knex.raw(`ALTER TABLE \"completion\" RENAME \"course_id\" TO \"course\";`)\n  await knex.raw(`ALTER TABLE \"completion\" RENAME \"user_id\" TO \"user\";`)\n  await knex.raw(\n    `ALTER TABLE \"completion_registered\" RENAME \"completion_id\" TO \"completion\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"completion_registered\" RENAME \"course_id\" TO \"course\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"completion_registered\" RENAME \"organization_id\" TO \"organization\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"completion_registered\" RENAME \"user_id\" TO \"user\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" RENAME \"completion_email_id\" TO \"completion_email\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" RENAME \"completions_handled_by_id\" TO \"completions_handled_by\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" RENAME \"inherit_settings_from_id\" TO \"inherit_settings_from\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course\" RENAME \"owner_organization_id\" TO \"owner_organization\";`,\n  )\n  await knex.raw(`ALTER TABLE \"course\" RENAME \"photo_id\" TO \"photo\";`)\n  await knex.raw(`ALTER TABLE \"course_alias\" RENAME \"course_id\" TO \"course\";`)\n  await knex.raw(\n    `ALTER TABLE \"course_organization\" RENAME \"course_id\" TO \"course\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course_organization\" RENAME \"organization_id\" TO \"organization\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"course_translation\" RENAME \"course_id\" TO \"course\";`,\n  )\n  await knex.raw(`ALTER TABLE \"course_variant\" RENAME \"course_id\" TO \"course\";`)\n  await knex.raw(\n    `ALTER TABLE \"email_delivery\" RENAME \"email_template_id\" TO \"email_template\";`,\n  )\n  await knex.raw(`ALTER TABLE \"email_delivery\" RENAME \"user_id\" TO \"user\";`)\n  await knex.raw(`ALTER TABLE \"exercise\" RENAME \"course_id\" TO \"course\";`)\n  await knex.raw(`ALTER TABLE \"exercise\" RENAME \"service_id\" TO \"service\";`)\n  await knex.raw(\n    `ALTER TABLE \"exercise_completion\" RENAME \"exercise_id\" TO \"exercise\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"exercise_completion\" RENAME \"user_id\" TO \"user\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"exercise_completion_required_actions\" RENAME \"exercise_completion_id\" TO \"exercise_completion\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"open_university_registration_link\" RENAME \"course_id\" TO \"course\";`,\n  )\n  await knex.raw(`ALTER TABLE \"organization\" RENAME \"creator_id\" TO \"creator\";`)\n  await knex.raw(\n    `ALTER TABLE \"organization_translation\" RENAME \"organization_id\" TO \"organization\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"study_module_translation\" RENAME \"study_module_id\" TO \"study_module\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_progress\" RENAME \"course_id\" TO \"course\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_progress\" RENAME \"user_id\" TO \"user\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_service_progress\" RENAME \"course_id\" TO \"course\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_service_progress\" RENAME \"service_id\" TO \"service\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_service_progress\" RENAME \"user_id\" TO \"user\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_course_service_progress\" RENAME \"user_course_progress_id\" TO \"user_course_progress\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"UserCourseSettings\" RENAME \"course_id\" TO \"course\";`,\n  )\n  await knex.raw(`ALTER TABLE \"UserCourseSettings\" RENAME \"user_id\" TO \"user\";`)\n  await knex.raw(\n    `ALTER TABLE \"user_course_settings_visibility\" RENAME \"course_id\" TO \"course\";`,\n  )\n  await knex.raw(\n    `ALTER TABLE \"user_organization\" RENAME \"organization_id\" TO \"organization\";`,\n  )\n  await knex.raw(`ALTER TABLE \"user_organization\" RENAME \"user_id\" TO \"user\";`)\n  await knex.raw(\n    `ALTER TABLE \"verified_user\" RENAME \"organization_id\" TO \"organization\";`,\n  )\n  await knex.raw(`ALTER TABLE \"verified_user\" RENAME \"user_id\" TO \"user\";`)\n}\n"]}