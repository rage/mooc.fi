{"version":3,"file":"20200723120702_alter-table-completion-completion-date.js","sourceRoot":"","sources":["../../migrations/20200723120702_alter-table-completion-completion-date.ts"],"names":[],"mappings":";;;;AAEA,SAAsB,EAAE,CAAC,IAAU;;;YACjC,sBAAO,IAAI,CAAC,MAAM;qBACf,SAAS,CAAC,YAAY,EAAE,iBAAiB,CAAC;qBAC1C,IAAI,CAAC,UAAC,MAAM;oBACX,IAAI,CAAC,MAAM,EAAE;wBACX,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY,EAAE,UAAU,KAAK;4BACzD,KAAK,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAA;wBACnC,CAAC,CAAC,CAAA;qBACH;gBACH,CAAC,CAAC,EAAA;;;CACL;AAVD,gBAUC;AAED,SAAsB,IAAI,CAAC,IAAU;;;YACnC,sBAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY,EAAE,UAAU,KAAK;oBACzD,KAAK,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAA;gBACrC,CAAC,CAAC,EAAA;;;CACH;AAJD,oBAIC","sourcesContent":["import * as Knex from \"knex\"\n\nexport async function up(knex: Knex): Promise<void> {\n  return knex.schema\n    .hasColumn(\"completion\", \"completion_date\")\n    .then((exists) => {\n      if (!exists) {\n        return knex.schema.alterTable(\"completion\", function (table) {\n          table.dateTime(\"completion_date\")\n        })\n      }\n    })\n}\n\nexport async function down(knex: Knex): Promise<void> {\n  return knex.schema.alterTable(\"completion\", function (table) {\n    table.dropColumn(\"completion_date\")\n  })\n}\n"]}