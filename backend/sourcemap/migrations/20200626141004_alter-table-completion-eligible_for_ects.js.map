{"version":3,"file":"20200626141004_alter-table-completion-eligible_for_ects.js","sourceRoot":"","sources":["../../migrations/20200626141004_alter-table-completion-eligible_for_ects.ts"],"names":[],"mappings":";;;;AAEA,SAAsB,EAAE,CAAC,IAAU;;;YACjC,sBAAO,IAAI,CAAC,MAAM;qBACf,SAAS,CAAC,YAAY,EAAE,mBAAmB,CAAC;qBAC5C,IAAI,CAAC,UAAC,MAAM;oBACX,IAAI,CAAC,MAAM,EAAE;wBACX,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY,EAAE,UAAU,KAAK;4BACzD,KAAK,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;wBACpD,CAAC,CAAC,CAAA;qBACH;gBACH,CAAC,CAAC,EAAA;;;CACL;AAVD,gBAUC;AAED,SAAsB,IAAI,CAAC,IAAU;;;YACnC,sBAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,YAAY,EAAE,UAAU,KAAK;oBACzD,KAAK,CAAC,UAAU,CAAC,mBAAmB,CAAC,CAAA;gBACvC,CAAC,CAAC,EAAA;;;CACH;AAJD,oBAIC","sourcesContent":["import * as Knex from \"knex\"\n\nexport async function up(knex: Knex): Promise<any> {\n  return knex.schema\n    .hasColumn(\"completion\", \"eligible_for_ects\")\n    .then((exists) => {\n      if (!exists) {\n        return knex.schema.alterTable(\"completion\", function (table) {\n          table.boolean(\"eligible_for_ects\").defaultTo(true)\n        })\n      }\n    })\n}\n\nexport async function down(knex: Knex): Promise<any> {\n  return knex.schema.alterTable(\"completion\", function (table) {\n    table.dropColumn(\"eligible_for_ects\")\n  })\n}\n"]}